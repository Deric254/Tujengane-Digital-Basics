<div class="slide-content">
    <h2 class="text-4xl font-extrabold text-[#49A078] mb-4">Ready to Level Up?</h2>
    <p class="text-lg text-gray-700 mb-6">You've completed Tujengane Digital Basics! What's next?</p>
    <ul class="highlight-list space-y-3 text-left max-w-md mx-auto">
        <li class="bg-gray-100 p-3 rounded-lg">
            <a href="../Tujengane analyst pro/analystpro.html" class="text-[#256d4f] font-semibold underline hover:text-[#49A078]">Join Analyst Pro for advanced skills</a>
            <div class="tooltip">Dive deeper into analytics</div>
        </li>
        <li class="bg-gray-100 p-3 rounded-lg">
            <a href="../Tujengane computer literacy/computerliteracy.html" class="text-[#256d4f] font-semibold underline hover:text-[#49A078]">Explore Computer Literacy</a>
            <div class="tooltip">Essential digital skills</div>
        </li>
        <li class="bg-gray-100 p-3 rounded-lg">
            <button id="requestCertBtn" class="text-[#256d4f] font-semibold underline hover:text-[#49A078] bg-transparent border-none cursor-pointer">Get your certificate</button>
            <div class="tooltip">Earn recognition for your skills</div>
        </li>
    </ul>
    <div id="certRequestArea" style="display:none; margin-top:2rem;">
        <label for="full-name-input" class="block text-lg font-semibold mb-2 text-[#256d4f]">Enter your full name for the certificate:</label>
        <input type="text" id="full-name-input" class="border border-gray-300 rounded px-4 py-2 mb-2 w-full max-w-md" placeholder="Your Full Name">
        <button id="sendCertRequestBtn" class="bg-[#49A078] text-white px-4 py-2 rounded font-semibold mt-2 hover:bg-[#3e8865]">
            Request Certificate via WhatsApp
        </button>
        <div id="certStatusMsg" class="mt-3 text-[#256d4f] font-semibold"></div>
    </div>
    <div id="certApprovalArea" style="display:none; margin-top:2rem;">
        <button id="approveCertBtn" class="bg-[#facc15] text-[#256d4f] px-4 py-2 rounded font-semibold mt-2 hover:bg-[#ffe066]">
            Approve Certificate (Admin Only)
        </button>
    </div>
    <div id="certificateArea" style="display:none; margin-top:2rem;">
        <div class="bg-white border-2 border-[#49A078] rounded-lg shadow-lg p-8 max-w-lg mx-auto text-center">
            <h3 class="text-2xl font-bold text-[#49A078] mb-4">Certificate of Completion</h3>
            <p class="text-lg text-gray-700 mb-2">This certifies that</p>
            <div id="certName" class="text-2xl font-extrabold text-[#256d4f] mb-2"></div>
            <p class="text-lg text-gray-700 mb-2">has successfully completed</p>
            <p class="text-xl font-semibold text-[#256d4f] mb-2">Tujengane Digital Basics</p>
            <p class="text-gray-600 mb-4">Powered by EXES BI</p>
            <div class="flex items-center justify-center gap-2 mt-4">
                <img src="../assets/signature.png" alt="Deric Marangu Signature" style="height:48px;">
                <span class="font-semibold text-[#256d4f]">Deric Marangu<br><span style="font-size:0.9em;">Founder, EXES BI</span></span>
            </div>
            <button id="downloadCertBtn" class="bg-[#49A078] text-white px-4 py-2 rounded font-semibold mt-6 hover:bg-[#3e8865]">
                Download Certificate
            </button>
        </div>
    </div>
    <div class="slide-interactive-tip" id="slideTip21">Use the links above to continue your journey or request your certificate!</div>
</div>
<script>
    // Only runs inside slide 21
    document.addEventListener('DOMContentLoaded', function() {
        const requestCertBtn = document.getElementById('requestCertBtn');
        const certRequestArea = document.getElementById('certRequestArea');
        const sendCertRequestBtn = document.getElementById('sendCertRequestBtn');
        const fullNameInput = document.getElementById('full-name-input');
        const certStatusMsg = document.getElementById('certStatusMsg');
        const certApprovalArea = document.getElementById('certApprovalArea');
        const approveCertBtn = document.getElementById('approveCertBtn');
        const certificateArea = document.getElementById('certificateArea');
        const certName = document.getElementById('certName');
        const downloadCertBtn = document.getElementById('downloadCertBtn');

        let certRequested = false;
        let certApproved = false;
        let userName = "";

        if (requestCertBtn) {
            requestCertBtn.onclick = function() {
                certRequestArea.style.display = 'block';
                certApprovalArea.style.display = 'none';
                certificateArea.style.display = 'none';
                certStatusMsg.textContent = '';
            };
        }

        if (sendCertRequestBtn) {
            sendCertRequestBtn.onclick = function() {
                userName = fullNameInput.value.trim();
                if (!userName) {
                    certStatusMsg.textContent = "Please enter your full name.";
                    return;
                }
                // WhatsApp link with custom message
                const waMsg = encodeURIComponent(`Hi Deric, I have completed Tujengane Digital Basics. My name is ${userName}. Please approve my certificate.`);
                window.open(`https://wa.me/254791360805?text=${waMsg}`, '_blank');
                certStatusMsg.textContent = "Request sent! Wait for approval from Deric.";
                certRequested = true;
                certApprovalArea.style.display = 'block';
            };
        }

        // Simulate admin approval (in real use, only Deric should see this button)
        if (approveCertBtn) {
            approveCertBtn.onclick = function() {
                if (certRequested && userName) {
                    certificateArea.style.display = 'block';
                    certApprovalArea.style.display = 'none';
                    certRequestArea.style.display = 'none';
                    certName.textContent = userName;
                }
            };
        }

        if (downloadCertBtn) {
            downloadCertBtn.onclick = function() {
                // Download certificate as image (simple HTML2Canvas)
                import('https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js').then(() => {
                    html2canvas(certificateArea.querySelector('.bg-white')).then(canvas => {
                        const link = document.createElement('a');
                        link.download = `Tujengane_Certificate_${userName.replace(/\s+/g, '_')}.png`;
                        link.href = canvas.toDataURL();
                        link.click();
                    });
                });
            };
        }
    });
</script>